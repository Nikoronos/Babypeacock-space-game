<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>babypeacock â€” Vertical Shooter</title>
<style>
  :root{--bg:#050814;--panel:#0d142b;--ink:#e8f0ff;--accent:#8be9fd;--good:#7CFC00;--bad:#ff6b6b}
  *{box-sizing:border-box} html,body{height:100%;margin:0;background:#050814;color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Poppins,Arial,sans-serif}
  header{max-width:980px;margin:8px auto 6px;padding:8px 12px;display:flex;justify-content:space-between;align-items:center}
  .brand{font-weight:800;letter-spacing:.3px}.brand em{font-style:normal;color:var(--accent)} /* p kÃ¼Ã§Ã¼k */
  #hud{display:flex;gap:10px}.tag{background:var(--panel);padding:6px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.06)}
  #wrap{max-width:980px;margin:0 auto 12px;padding:0 12px}
  #stage{position:relative;aspect-ratio:9/16;width:100%;touch-action:none}
  canvas{width:100%;height:100%;display:block;border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,.5)}
  #overlay{pointer-events:none;position:absolute;inset:0;display:flex;align-items:center;justify-content:center}
  .panel{pointer-events:auto;background:rgba(13,20,43,.92);backdrop-filter:blur(4px);padding:22px;border-radius:16px;text-align:center;border:1px solid rgba(255,255,255,.08)}
  .panel h2{margin:0 0 8px}.panel button{margin-top:12px;background:#1a2652;color:var(--ink);border:1px solid rgba(255,255,255,.12);padding:10px 14px;border-radius:10px;font-weight:700}
  footer{opacity:.75;font-size:12px;text-align:center;margin:6px 0 12px}
</style>
</head>
<body>
<header>
  <div class="brand">baby<em>peacock</em> â€” Space Shooter ðŸ¦šðŸš€</div>
  <div id="hud">
    <div class="tag">Score: <b id="sc">0</b></div>
    <div class="tag">Lives: <b id="lv">3</b></div>
    <div class="tag">Feathers: <b id="fw">0</b></div>
  </div>
</header>

<div id="wrap">
  <div id="stage">
    <canvas id="game"></canvas>
    <div id="overlay"></div>
  </div>
</div>

<footer>Gemini altta; sÃ¼rÃ¼kle â†’ hareket. BasÄ±lÄ± tut â†’ yukarÄ± ateÅŸ. YeÅŸil tÃ¼y = gÃ¼Ã§lendirme. UzaylÄ± gemileri tepeden iner.</footer>

<script>
/* ---------- Ayarlar ---------- */
const ASSET = "yc3ku6.jpg";  // maskot gÃ¶rseli index.html ile aynÄ± klasÃ¶rde
const MAX_LIVES = 3;

/* ---------- Canvas ---------- */
const c = document.getElementById("game");
const ctx = c.getContext("2d");
let W=540, H=960;
function fit(){
  const dpr = Math.min(2, window.devicePixelRatio||1);
  c.width = Math.round(540*dpr);
  c.height= Math.round(960*dpr);
  W=c.width; H=c.height;
}
new ResizeObserver(fit).observe(document.getElementById("stage")); fit();

/* ---------- HUD & Overlay ---------- */
const hud={sc:document.getElementById("sc"),lv:document.getElementById("lv"),fw:document.getElementById("fw")};
const overlay=document.getElementById("overlay");
function setHud(){ hud.sc.textContent=S.score; hud.lv.textContent=S.lives; hud.fw.textContent=S.feathers; }
function startScreen(){
  overlay.innerHTML=`<div class="panel">
    <h2>ðŸ¦š Tavus KuÅŸu Gemisi</h2>
    <div style="opacity:.9">SÃ¼rÃ¼kle â†’ hareket â€¢ BasÄ±lÄ± tut â†’ ateÅŸ<br>YeÅŸil tÃ¼y ile ateÅŸ gÃ¼Ã§lenir â€¢ 3 darbe = biter</div>
    <button id="btnStart">BaÅŸla</button>
  </div>`;
  document.getElementById("btnStart").onclick=()=>{overlay.innerHTML=""; reset(); run();};
}
function overScreen(){
  overlay.innerHTML=`<div class="panel">
    <h2>Game Over</h2>
    <div style="opacity:.9;margin-bottom:8px">Skor: <b>${S.score}</b> â€” TÃ¼y: <b>${S.feathers}</b></div>
    <button id="btnAgain">Tekrar Oyna</button>
  </div>`;
  document.getElementById("btnAgain").onclick=()=>{overlay.innerHTML=""; reset(); run();};
}

/* ---------- VarlÄ±klar ---------- */
const shipImg=new Image(); let shipReady=false;
shipImg.onload=()=>shipReady=true; shipImg.onerror=()=>shipReady=false; shipImg.src=ASSET;

/* ---------- Durum ---------- */
const S={running:false,over:false,tPrev:0,score:0,lives:MAX_LIVES,feathers:0,press:false};
const player={x:W*0.5,y:H*0.86,r:28,vx:0,vy:0,fireCd:0,fireDelay:220};
const bullets=[], aliens=[], powerUps=[];
let spawnAlienT=0, spawnPowT=0, speedScale=1;

/* ---------- Girdi ---------- */
const p={x:player.x,y:player.y,active:false};
function localXY(e){const r=c.getBoundingClientRect();const px=(e.touches?e.touches[0].clientX:e.clientX)-r.left;const py=(e.touches?e.touches[0].clientY:e.clientY)-r.top;return {x:px*(c.width/r.width),y:py*(c.height/r.height)}}
["pointerdown","mousedown","touchstart"].forEach(ev=>{c.addEventListener(ev,e=>{S.press=true;p.active=true;const q=localXY(e);p.x=q.x;p.y=q.y;});});
["pointermove","mousemove","touchmove"].forEach(ev=>{c.addEventListener(ev,e=>{const q=localXY(e);p.x=q.x;p.y=q.y;if(e.cancelable)e.preventDefault();},{passive:false});});
["pointerup","mouseleave","touchend","touchcancel"].forEach(ev=>{c.addEventListener(ev,()=>{S.press=false;p.active=false;});});

/* ---------- DÃ¶ngÃ¼ ---------- */
function reset(){
  S.score=0; S.lives=MAX_LIVES; S.feathers=0; setHud();
  bullets.length=0; aliens.length=0; powerUps.length=0;
  spawnAlienT=0; spawnPowT=0; speedScale=1;
  player.x=W*0.5; player.y=H*0.86; player.vx=player.vy=0; player.fireCd=0; player.fireDelay=220;
  S.over=false;
}
function run(){S.running=true; S.tPrev=performance.now(); requestAnimationFrame(loop);}
function loop(t){ if(!S.running) return; const dt=Math.min(40,t-S.tPrev); S.tPrev=t; update(dt/16.666); render(); requestAnimationFrame(loop); }

/* ---------- MantÄ±k ---------- */
function update(dt){
  // oyuncu (alt bÃ¶lgede kal)
  const ease=0.2;
  if(p.active){
    player.vx += ((p.x - player.x)*ease - player.vx)*0.5;
    player.vy += ((p.y - player.y)*ease - player.vy)*0.5;
  }else{ player.vx*=0.9; player.vy*=0.9; }
  player.x = clamp(player.x + player.vx*dt, player.r, W-player.r);
  const floor = H*0.75; // oyuncu alt Ã§eyreÄŸi geÃ§mesin
  player.y = clamp(player.y + player.vy*dt, floor, H-player.r);

  // ateÅŸ (yukarÄ±)
  player.fireCd -= dt*16.666;
  if(S.press && player.fireCd<=0){
    const spread = Math.min(3, 1+Math.floor(S.feathers/3));
    const speed = 11 + Math.min(6, S.feathers*0.6);
    for(let i=0;i<spread;i++){
      const ang = (spread===1?0:(-0.18 + i*(0.36/(spread-1))));
      bullets.push({x:player.x + (i-(spread-1)/2)*6, y:player.y-player.r, vx:Math.sin(ang)*speed, vy:-Math.cos(ang)*speed});
    }
    player.fireCd = Math.max(90, player.fireDelay - S.feathers*8);
  }

  // uzaylÄ± Ã¼ret
  spawnAlienT += dt*16.666;
  const every = Math.max(350, 900 - S.score*0.8);
  if(spawnAlienT>every){
    spawnAlienT=0;
    const x = 30 + Math.random()*(W-60);
    const r = 20 + Math.random()*26;
    const vy = 2.2 + Math.random()*2.4 + speedScale*0.2;
    const hp = r>32 ? 3 : 2;
    aliens.push({x,y:-r,r,vy,vx:(Math.random()-.5)*0.5,hp,type: Math.random()<0.5?0:1});
  }

  // tÃ¼y Ã¼ret
  spawnPowT += dt*16.666;
  if(spawnPowT>2800){
    spawnPowT=0;
    const x = 20 + Math.random()*(W-40);
    powerUps.push({x,y:-20,r:14,vy:2.8});
  }

  // mermiler
  for(let i=bullets.length-1;i>=0;i--){
    const b=bullets[i]; b.x+=b.vx*dt; b.y+=b.vy*dt;
    if(b.y<-20 || b.x<-20 || b.x>W+20) bullets.splice(i,1);
  }

  // uzaylÄ±lar
  for(let i=aliens.length-1;i>=0;i--){
    const a=aliens[i]; a.x+=a.vx*dt; a.y+=a.vy*dt;
    if(a.y>H+a.r){ aliens.splice(i,1); continue; }

    // oyuncu Ã§arpÄ±ÅŸmasÄ±
    if(dist2(a.x,a.y,player.x,player.y) < sq(a.r + player.r*0.7)){
      aliens.splice(i,1); hit(); continue;
    }
    // mermi Ã§arpÄ±ÅŸmasÄ±
    for(let j=bullets.length-1;j>=0;j--){
      const b=bullets[j];
      if(dist2(a.x,a.y,b.x,b.y) < sq(a.r)){
        bullets.splice(j,1); a.hp--; S.score += 5;
        if(a.hp<=0){ aliens.splice(i,1); S.score += 15; speedScale += .02; }
        setHud(); break;
      }
    }
  }

  // tÃ¼yler
  for(let i=powerUps.length-1;i>=0;i--){
    const f=powerUps[i]; f.y += f.vy*dt;
    if(f.y>H+20){ powerUps.splice(i,1); continue; }
    if(dist2(f.x,f.y,player.x,player.y) < sq(f.r + player.r*0.7)){
      powerUps.splice(i,1); S.feathers++; S.score += 20; setHud(); flash();
    }
  }
}

function hit(){ S.lives--; setHud(); shakeT=220; if(S.lives<=0){ S.running=false; overScreen(); } }
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
function sq(n){return n*n;}
function dist2(x1,y1,x2,y2){const dx=x1-x2,dy=y1-y2;return dx*dx+dy*dy;}

/* ---------- Ã‡izim ---------- */
let starT=0, shakeT=0, flashT=0;
function flash(){ flashT=160; }
function drawAlien(a){
  ctx.save(); ctx.translate(a.x,a.y);
  // tip 0: disk; tip 1: Ã¼Ã§gen uÃ§an gemi
  if(a.type===0){
    ctx.fillStyle="#9aa6ff"; // kubbe
    ctx.beginPath(); ctx.ellipse(0,-a.r*0.25,a.r*0.6,a.r*0.4,0,0,Math.PI*2); ctx.fill();
    ctx.fillStyle="#3c4a6b"; // gÃ¶vde
    ctx.beginPath(); ctx.ellipse(0,0,a.r,a.r*0.55,0,0,Math.PI*2); ctx.fill();
    ctx.fillStyle="rgba(255,255,255,.12)"; ctx.fillRect(-a.r*0.7,-a.r*0.1,a.r*1.4,a.r*0.2);
  }else{
    ctx.fillStyle="#3c4a6b";
    ctx.beginPath(); // V ÅŸeklinde Ã¼Ã§gen uzaylÄ±
    ctx.moveTo(0,-a.r); ctx.lineTo(a.r*0.9,a.r*0.6); ctx.lineTo(-a.r*0.9,a.r*0.6); ctx.closePath(); ctx.fill();
    ctx.fillStyle="#9aa6ff"; ctx.beginPath(); ctx.arc(0,-a.r*0.4,a.r*0.35,0,Math.PI*2); ctx.fill();
  }
  ctx.restore();
}
function render(){
  starT += 0.6;
  const shakeX = shakeT>0 ? (Math.random()-0.5)*6 : 0;
  const shakeY = shakeT>0 ? (Math.random()-0.5)*6 : 0;
  if (shakeT>0) shakeT -= 16;
  ctx.setTransform(1,0,0,1, shakeX, shakeY);

  // arka plan (yÄ±ldÄ±zlar yukarÄ±dan aÅŸaÄŸÄ± hissi)
  const grad=ctx.createLinearGradient(0,0,0,H); grad.addColorStop(0,"#081125"); grad.addColorStop(1,"#0a1231");
  ctx.fillStyle=grad; ctx.fillRect(-shakeX,-shakeY,W,H);
  for(let i=0;i<90;i++){
    const y=(i*137 + starT*4) % (H+50), x=(i*223 % W);
    ctx.fillStyle="rgba(255,255,255,.28)"; ctx.fillRect(x, y, 2, 2);
  }

  // power-ups
  powerUps.forEach(f=>{ ctx.beginPath(); ctx.fillStyle= "#7CFC00"; ctx.arc(f.x,f.y,f.r,0,Math.PI*2); ctx.fill(); });

  // uzaylÄ±lar
  aliens.forEach(a=> drawAlien(a));

  // mermiler (yukarÄ±)
  ctx.fillStyle="#8be9fd"; bullets.forEach(b=>{ ctx.fillRect(b.x-2,b.y-8,4,12); });

  // oyuncu â€” tavus kuÅŸu gemisi
  const s = player.r*2;
  ctx.save(); ctx.translate(player.x,player.y);
  // hafif sallanma (uÃ§uÅŸ hissi)
  ctx.rotate(Math.sin(performance.now()/300)*0.02);
  if (shipReady) ctx.drawImage(shipImg, -s/2, -s/2, s, s);
  else { ctx.fillStyle="#8be9fd"; ctx.beginPath(); ctx.arc(0,0,player.r,0,Math.PI*2); ctx.fill(); }
  ctx.restore();

  // vurgu flaÅŸÄ±
  if (flashT>0){ ctx.fillStyle="rgba(255,255,255,.08)"; ctx.fillRect(0,0,W,H); flashT -= 16; }

  ctx.setTransform(1,0,0,1,0,0);
}

/* ---------- GÃ¶rÃ¼nÃ¼rlÃ¼k ---------- */
document.addEventListener("visibilitychange", ()=>{
  if(document.hidden){ S.running=false; }
  else if(!S.over){ S.tPrev=performance.now(); S.running=true; requestAnimationFrame(loop); }
});

/* ---------- BaÅŸlat ---------- */
setHud(); startScreen();
</script>
</body>
</html>
