<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BPC Mini Uzay Oyunu ðŸ¦š</title>
  <style>
    body {
      margin: 0;
      background: radial-gradient(circle at center, #020617, #000);
      overflow: hidden;
    }
    canvas {
      display: block;
      margin: auto;
      background: linear-gradient(#01010a, #021);
    }
    #scoreboard {
      position: fixed;
      top: 10px;
      left: 0;
      width: 100%;
      color: #00ffcc;
      text-align: center;
      font-family: monospace;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <div id="scoreboard">ðŸ¦š Skor: <span id="score">0</span></div>
  <canvas id="game" width="480" height="720"></canvas>

  <!-- ðŸ”Š Ses dosyalarÄ± -->
  <audio id="shootSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_3b4b5f10a0.mp3"></audio>
  <audio id="hitSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2b1b0dcd8c.mp3"></audio>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");

    const shootSound = document.getElementById("shootSound");
    const hitSound = document.getElementById("hitSound");

    const playerImg = new Image();
    playerImg.src = "img/player/bpc_mini.png";

    const enemyImgs = [
      "img/bpc_enemy_green.png",
      "img/bpc_enemy_red.png",
      "img/bpc_enemy_ufo_gray.png",
      "img/bpc_enemy_ufo_red.png"
    ].map(src => {
      const img = new Image();
      img.src = src;
      return img;
    });

    const bullets = [];
    const enemies = [];
    let score = 0;

    const player = {
      x: canvas.width / 2 - 25,
      y: canvas.height - 100,
      w: 60,
      h: 60,
      speed: 5
    };

    let keys = {};

    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);

    function spawnEnemy() {
      const img = enemyImgs[Math.floor(Math.random() * enemyImgs.length)];
      const size = 40 + Math.random() * 30;
      enemies.push({
        x: Math.random() * (canvas.width - size),
        y: -size,
        w: size,
        h: size,
        speed: 1 + Math.random() * 2,
        img
      });
    }

    function shoot() {
      bullets.push({
        x: player.x + player.w / 2 - 2,
        y: player.y - 10,
        w: 4,
        h: 10,
        speed: 8
      });
      shootSound.currentTime = 0;
      shootSound.play();
    }

    let shootCooldown = 0;
    let spawnTimer = 0;

    function update() {
      if (keys["ArrowLeft"]) player.x -= player.speed;
      if (keys["ArrowRight"]) player.x += player.speed;
      player.x = Math.max(0, Math.min(canvas.width - player.w, player.x));

      if (keys[" "] && shootCooldown <= 0) {
        shoot();
        shootCooldown = 15;
      }
      shootCooldown--;

      bullets.forEach(b => b.y -= b.speed);
      for (let i = bullets.length - 1; i >= 0; i--) {
        if (bullets[i].y < -20) bullets.splice(i, 1);
      }

      spawnTimer++;
      if (spawnTimer > 60) {
        spawnEnemy();
        spawnTimer = 0;
      }
      enemies.forEach(e => e.y += e.speed);

      // collision check
      for (let i = enemies.length - 1; i >= 0; i--) {
        const e = enemies[i];
        for (let j = bullets.length - 1; j >= 0; j--) {
          const b = bullets[j];
          if (b.x < e.x + e.w && b.x + b.w > e.x && b.y < e.y + e.h && b.y + b.h > e.y) {
            enemies.splice(i, 1);
            bullets.splice(j, 1);
            score++;
            scoreEl.textContent = score;
            hitSound.currentTime = 0;
            hitSound.play();
            break;
          }
        }
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(playerImg, player.x, player.y, player.w, player.h);

      bullets.forEach(b => {
        ctx.fillStyle = "#00ffcc";
        ctx.fillRect(b.x, b.y, b.w, b.h);
      });

      enemies.forEach(e => {
        ctx.drawImage(e.img, e.x, e.y, e.w, e.h);
      });
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
